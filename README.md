# TreeSimulator
木の成長をシミュレーションするゲーム

## 概要
L-System（Lindenmayer System）を用いて木の成長をシミュレーションするpygameベースのゲームです。プレイヤーは木の成長パラメータを調整しながら、美しく健康的な木を育てることを目指します。

## 技術仕様
- **言語**: Python 3.8+
- **ライブラリ**: pygame
- **成長モデル**: L-System（Lindenmayer System）
- **データ保存**: JSON形式

## L-System基本ルール
### 基本記号
- `F`: 前進して線を描く（枝を伸ばす）
- `+`: 右に回転（角度: θ）
- `-`: 左に回転（角度: θ）
- `[`: 現在の状態を保存（分岐開始）
- `]`: 保存した状態に戻る（分岐終了）
- `X`: 成長点（葉や花の生成）

### 初期文字列
```
X
```

### 書き換え規則
```
X → F[+X]F[-X]+X
F → FF
```

## ゲームシステム

### 基本パラメータ
1. **成長角度 (θ)**: 枝の分岐角度 [15°-45°]
2. **成長速度**: 1フレームあたりの成長量 [1-5]
3. **分岐確率**: 新しい枝が生える確率 [0.1-0.8]
4. **枝の長さ**: 各枝の基本長さ [10-50px]
5. **木の年齢**: 成長段階 [0-100]

### 環境要因
1. **光の強度**: 画面の明るさに影響 [0-100%]
2. **水分**: 成長速度に影響 [0-100%]
3. **栄養**: 分岐数に影響 [0-100%]

## 操作性

### 基本操作
- **マウスクリック**: 木の根元をクリックして成長開始
- **スペースキー**: 成長の一時停止/再開
- **Rキー**: リセット
- **Sキー**: スクリーンショット保存

### パラメータ調整
- **矢印キー**: 成長角度の調整
- **+/-キー**: 成長速度の調整
- **[/]キー**: 分岐確率の調整
- **</>キー**: 枝の長さの調整

### 環境調整
- **マウスホイール**: 光の強度調整
- **Ctrl+マウスホイール**: 水分調整
- **Shift+マウスホイール**: 栄養調整

## ゲームルール

### 勝利条件
1. **高さ目標**: 指定された高さに到達
2. **枝の数**: 最小分岐数を達成
3. **バランス**: 左右の枝のバランスが良好
4. **美しさ**: 視覚的に美しい形状

### 失敗条件
1. **枯死**: 環境要因が極端に悪い状態が続く
2. **倒木**: 重心が不安定になりすぎる
3. **時間切れ**: 制限時間内に目標を達成できない

## トレードオフポイント

### 1. 成長速度 vs 安定性
- **高速成長**: 早く目標に到達できるが、枝が細く不安定
- **低速成長**: 安定した木になるが、時間がかかる

### 2. 分岐角度 vs 光合成効率
- **広い角度**: 光を多く受けられるが、重心が不安定
- **狭い角度**: 安定しているが、光合成効率が低い

### 3. 枝の長さ vs 強度
- **長い枝**: より多くの葉を支えられるが、折れやすい
- **短い枝**: 強度は高いが、成長が制限される

### 4. 分岐数 vs 資源配分
- **多分岐**: 美しい形状になるが、各枝への栄養が不足
- **少分岐**: 各枝が太く強くなるが、単調な形状

### 5. 環境要因のバランス
- **光重視**: 上向き成長が促進されるが、水分不足のリスク
- **水分重視**: 安定した成長だが、光不足で成長が遅い
- **栄養重視**: 分岐が促進されるが、枝が細くなる

## スコアリングシステム

### 基本スコア
- **高さ**: 1000点満点
- **枝の数**: 500点満点
- **バランス**: 300点満点
- **美しさ**: 200点満点

### ボーナス
- **環境バランス**: 100点ボーナス
- **効率的成長**: 50点ボーナス
- **時間短縮**: 100点ボーナス

## フォルダ構成
```
TreeSimulator/
├── README.md
├── ROADMAP.md
├── requirements.txt
├── main.py
├── src/
│   ├── __init__.py
│   ├── lsystem.py          # L-System実装
│   ├── tree.py             # 木のクラス
│   ├── environment.py      # 環境要因管理
│   ├── game_state.py       # ゲーム状態管理
│   ├── renderer.py         # 描画処理
│   └── ui.py              # UI要素
├── assets/
│   ├── fonts/
│   ├── images/
│   └── sounds/
├── data/
│   ├── saves/             # セーブデータ
│   └── config.json        # 設定ファイル
└── tests/
    ├── __init__.py
    ├── test_lsystem.py
    └── test_tree.py
```

